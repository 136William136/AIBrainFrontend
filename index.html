<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<!--  <script src="https://accounts.google.com/gsi/client" async></script>-->
  <link rel="icon" href="img/chatbot-icon.png" type="image/png">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  <link rel="stylesheet" type="text/css" href="css/battery.css">
  <link rel="stylesheet" type="text/css" href="css/styles.css">
  <link rel="stylesheet" type="text/css" href="css/modal.css">
  <link rel="stylesheet" type="text/css" href="css/layout.css">
  <link rel="stylesheet" type="text/css" href="css/menu.css">
  <link rel="stylesheet" href="node_modules/prismjs/themes/prism.css">
  <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.css">
  <title>Chat App</title>
</head>
<body>
  <script src="node_modules/sse.js/lib/sse.js"></script>
  <script src="node_modules/markdown-it/dist/markdown-it.js"></script>
  <script src="node_modules/prismjs/prism.js"></script>
  <script src="node_modules/clipboard/dist/clipboard.min.js"></script>
  <script src="public.js"></script>
<!--  <script src="https://www.paypal.com/sdk/js?client-id=test&currency=USD"></script>-->
  <script>
    paypal.Buttons({
      createOrder() {
        return fetch("http://localhost:8087/payment/create-paypal-order", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            cart: [
              {
                sku: "YOUR_PRODUCT_STOCK_KEEPING_UNIT",
                quantity: "YOUR_PRODUCT_QUANTITY",
              },
            ],
          }),
        })
                .then((response) => response.json())
                .then((order) => order.id);
      },
      // Finalize the transaction on the server after payer approval
      onApprove(data) {
        return fetch("http://localhost:8087/payment/capture-paypal-order", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            orderID: data.orderID
          })
        })
                .then((response) => response.json())
                .then((orderData) => {
                  // Successful capture! For dev/demo purposes:
                  console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                  const transaction = orderData.purchase_units[0].payments.captures[0];
                  alert(`Transaction ${transaction.status}: ${transaction.id}\n\nSee console for all available details`);
                });
      }
    }).render('#paypal-button-container');
  </script>
  <nav class="menu">
    <h3 class="menu-title">AI Chat</h3>
    <footer>
      <p class="menu-nav">
        <button onclick="addSession()" class="add-session-button">
          <i class="fas fa-plus-circle"></i>&nbsp;&nbsp;Add Session
        </button>
        <div class="top-info">
        </div>
      </p>
      <div class="base-info">
        <p class="menu-nav">
          <div style="margin-top: -30px">
            <div style="display: flex;justify-content: center">
                Download App
            </div>
            <div style="display: flex;justify-content: center;margin-top: 10px">
              <div class="download-icon" onclick="downloadApp('win')"><i class="fab fa-windows"></i>
                <br><span class="download-name">win</span>
              </div>
              <div class="download-icon" onclick="downloadApp('mac')"><i class="fab fa-apple"></i>
                <br><span class="download-name">mac</span>
              </div>
              <div class="download-icon" onclick="downloadApp('ios')"><i class="fab fa-app-store-ios"></i>
                <br><span class="download-name">ios</span>
              </div>
              <div class="download-icon" onclick="downloadApp('android')"><i class="fab fa-android"></i>
                <br><span class="download-name">android</span>
              </div>
            </div>
          </div>
        </p>
        <p class="menu-nav">Contact us:<br>leexee.net@outlook.com<br><br><br>
<!--          <div id="shopping" class="shopping-cart"><i class="fas fa-shopping-cart"></i></div>-->
<!--           <div onclick="openPaymentModal()" class="shopping-cart"><i class="fas fa-shopping-cart"></i></div>-->
        </p>
      </div>
      <p id="settingIcon" class="setting-icon"><i class="fas fa-cog"></i></p>
      <div id="settingList" class="setting-list">
        <div>
          Theme <button onclick="changeTheme()"><i class="fas fa-moon"></i></button>
        </div>
        <div>
          Quality
          <select id="quality" class="quality-type">
            <option value="standard">standard</option>
            <option value="premium">premium</option>
          </select>
        </div>
      </div>
    </footer>
  </nav>

  <header id="headerBar">
    <i id="menuButton" class="menu-button fas fa-bars"></i>
    <span class="user-info">
      <span class="plugin-container">
        <button onclick="openPluginModal()" class="bottom-button shadow fas fa-star plugin-button"></button>
      </span>
      <div id="battery" class="battery shadow-box"><div id="quota-level" class="battery-level"></div></div>
      <span id="userLogo" class="user-logo"><i class="fas fa-user-circle"></i></span>
      <div id="popup" class="popup" onclick="event.stopPropagation();">
         <div id="userName" style="font-size: 14px"></div>
         <button class="login-btn" onclick="openLoginModal()"><i class="fas fa-sign-in-alt"></i>&nbsp;&nbsp;Login</button>
      </div>
    </span>
  </header>
  <div id="contentContainer">
    <main>
    <span class="bottom-message" id="bottomMessage">
      <button id="clearButton" onclick="clearMessageBox()" class="bottom-button shadow fas fa-trash"></button>
      <span class="bottom-input-message" id="bottomInputMessage">
        <textarea rows="4" type="text" id="inputText" placeholder="" class="user-input shadow"></textarea>
      </span>
      <button id="sendButton" onclick="callBackendAPI()"
              class="bottom-button shadow fas fa-paper-plane"></button>
      <button id="pauseButton"
              class="bottom-button shadow fa fa-pause" style="display: none"></button>

      <label for="file-upload" class="bottom-button upload-button shadow fa fa-image"></label>
      <input id="file-upload" style="display: none" type="file" />
    </span>
      <div class="message-box-container">
        <div class="bot-bubble-container" style="margin-left: 10px">
          <img src="img/chatbot.png" class="avatar-icon">
          <div class="message shadow bot-message hello-message">Hello! How can I help you today?</div>
        </div>

        <div id="messageBox" class="message-box"></div>
      </div>
    </main>
  </div>

  <script src="js/index.js"></script>


<!--  login 模态框-->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title"> <i class="fas fa-user modal-icon"></i>&nbsp;&nbsp;Login / Sign up</span>
        <button onclick="closeLoginModal()" class="normalButton rightButton">&times;</button>
      </div>
      <div id="login" class="tabcontent">
          <form class="modal-table" method="post" action="https://www.leexee.net/chat" onsubmit="event.preventDefault();return false;">
           <div>
             <i class="fas fa-envelope modal-icon"></i>
             <input placeholder="Email" class="login-input shadow-box" type="email" id="email" name="email" required>
           </div>
          <div>
            <i class="fas fa-lock modal-icon"></i>
            <input placeholder="Password" class="login-input shadow-box" type="password" id="password" name="password" required>
          </div>
          <div id="verificationContainer">
            <i class="fas fa-code modal-icon"></i>
            <input placeholder="Verification Code" class="login-input verification-input shadow-box" id="verificationCode">
            <button class="verification-button" id="verificationButton" onclick="verifyTimer()">Verify</button>
          </div>
          <input type="text" style="display: none">
          <div>
            <button type="submit" class="normalButton centerButton" onclick="userLogin()">login / sign up</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- 支付模态框 -->
  <div id="paymentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title"> <i class="fab fa-paypal modal-icon"></i>&nbsp;&nbsp;Buy Credit</span>
        <button onclick="closePaymentModal()" class="normalButton rightButton">&times;</button>
      </div>
      <div id="payment" class="tabcontent">
        <div class="payment-container">
          <div id="paypal-button-container"></div>
        </div>
      </div>
    </div>
  </div>

  <!--  plugin 模态框-->
  <div id="pluginModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title"> <i class="fas fa-toolbox modal-icon"></i>&nbsp;&nbsp;Extra Features</span>
        <button onclick="closePluginModal()" class="normalButton rightButton">&times;</button>
      </div>
      <div id="plugin" class="tabcontent">
        <div class="plugin-div-container">
          <input onchange="setPlugin()" class="checkbox" type="checkbox"
                 id="generate_picture" name="generate_picture_checkbox" value="generate_picture">
          <label for="generate_picture">Generate pictures</label>
          <label class="exclamation">
            <span><i class="fas fa-exclamation-circle gray-icon"></i></span>
            <span class="plugin-tooltip">ChatBot can generate standard/superior pictures with a description of the full picture</span>
          </label>
        </div>
        <div class="plugin-div-container">
          <input onchange="setPlugin()" class="checkbox"type="checkbox"
                 id="search_on_internet_1" name="search_on_internet_1_checkbox" value="search_on_internet_1">
          <label for="search_on_internet_1">Search on the internet</label>
          <label class="exclamation">
            <span><i class="fas fa-exclamation-circle gray-icon"></i></span>
            <span class="plugin-tooltip">ChatBot can search information on the internet including videos</span>
          </label>
        </div>
        <div class="plugin-div-container">
          <input onchange="setPlugin()" class="checkbox"type="checkbox"
                 id="search_on_internet_2" name="search_on_internet_2_checkbox" value="search_on_internet_2">
          <label for="search_on_internet_2">Analyze urls</label>
          <label class="exclamation">
            <span><i class="fas fa-exclamation-circle gray-icon"></i></span>
            <span class="plugin-tooltip">ChatBot can analyze the text content with a given public url</span>
          </label>
        </div>
        <div class="plugin-div-container">
          <input onchange="setPlugin()" class="checkbox" type="checkbox"
                 id="send_mail" name="send_mail_checkbox" value="send_mail">
          <label for="send_mail">Send emails</label>
          <label class="exclamation">
            <span><i class="fas fa-exclamation-circle gray-icon"></i></span>
            <span class="plugin-tooltip">ChatBot can send emails</span>
          </label>
        </div>
        <div class="plugin-div-container">
          <input onchange="setPlugin()" class="checkbox" type="checkbox"
                 id="analyze_file" name="analyze_file_checkbox" value="analyze_file">
          <label for="analyze_file">Analyze files</label>
          <label class="exclamation">
            <span><i class="fas fa-exclamation-circle gray-icon"></i></span>
            <span class="plugin-tooltip">ChatBot can analyze doc files you uploaded</span>
          </label>
        </div>
      </div>
      <div>
        <button class="normalButton pluginSubmitButton" onclick="closePluginModal()">Save</button>
      </div>
    </div>
  </div>


</body>
</html>


